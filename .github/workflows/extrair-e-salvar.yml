name: Baixar e Extrair arq.zip

on:
  workflow_dispatch:  # Permite execuÃ§Ã£o manual no GitHub Actions

jobs:
  baixar-extrair:
    runs-on: ubuntu-latest

    env:
      FTP_HOST: 191.252.83.183
      FTP_USER: ${{ secrets.LWEB_USER }}
      FTP_PASS: ${{ secrets.LWEB_PASS }}
      ZIP_FILE: arq.zip

    steps:
      - name: ğŸ—‚ï¸ Criar diretÃ³rios de trabalho
        run: mkdir -p workspace/unzipped

      - name: ğŸ“¥ Baixar arq.zip via FTP (LocalWeb)
        run: |
          echo "ğŸ”½ Baixando $ZIP_FILE via FTP..."
          curl -u "$FTP_USER:$FTP_PASS" "ftp://$FTP_HOST/$ZIP_FILE" -o workspace/$ZIP_FILE

      - name: ğŸ“¦ Descompactar arq.zip
        run: |
          echo "ğŸ“‚ Extraindo conteÃºdo de $ZIP_FILE..."
          unzip -o workspace/$ZIP_FILE -d workspace/unzipped

      - name: ğŸ“¤ Publicar todos os arquivos extraÃ­dos como artefato
        uses: actions/upload-artifact@v4
        with:
          name: arquivos-extraidos
          path: workspace/unzipped
